{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>ğŸ“ Todo ãƒªã‚¹ãƒˆ</h1>
    
    <!-- Todoè¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  -->
    <form class="add-form"
          hx-post="/todos"
          hx-target="#todo-list"
          hx-swap="afterbegin"
          hx-on::after-request="this.reset()"
          hx-trigger="submit"
          hx-indicator="#spinner">
        <input type="text" 
               name="title" 
               placeholder="æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å…¥åŠ›..." 
               required>
        <button type="submit">è¿½åŠ </button>
    </form>
    
    <!-- Todoãƒªã‚¹ãƒˆ -->
    <ul id="todo-list" class="todo-list">
        {% for todo in todos %}
            {% include "partials/todo_item.html" %}
        {% endfor %}
    </ul>
    
    <!-- Todoæ•°ã®ã‚«ã‚¦ãƒ³ãƒˆï¼ˆè‡ªå‹•æ›´æ–°ï¼‰ -->
    <div class="todo-count"
         hx-get="/todos/count"
         hx-trigger="load, every 2s">
        {{ todos|selectattr("completed", "equalto", False)|list|length }} ä»¶ã®ã‚¿ã‚¹ã‚¯
    </div>
</div>
{% endblock %}
